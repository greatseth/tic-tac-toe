<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>TIC-TAC-2: THE EXTREME</title>
    <link rel="stylesheet" href="stylesheets/screen.css" type="text/css" media="screen" charset="utf-8">
    <script type="text/javascript" charset="utf-8" src="javascripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="javascripts/TTT.js"></script>
    <script type="text/javascript" charset="utf-8" src="javascripts/TTT/Game.js"></script>
    <script type="text/javascript" charset="utf-8">
      window.onload = function() {
        TTT.current_game = new TTT.Game(function(game) {
          game.mute = true;

          game.set_cells($("#board li"));

          game.cells.click(function(e) {
            var c    = $(e.target);
            var mark = game.mark_for_turn();

            if (!game.mark(c)) {
              game.mark(c, mark);
              c.addClass("marked");

              var game_state = game.check_for_win();

              // a win or a draw
              if (game_state) {
                if (TTT.Game.STATES.DRAW === game_state.state) {
                  game.play_audio("Sad-Trombone");
                  $("#notice").text("It's a draw!");

                } else if (TTT.Game.STATES.WIN === game_state.state) {
                  $.each(game_state.winning_set, function(i,cell_index) {
                    $(game.cells[cell_index]).addClass("winner");
                  });
                  game.play_audio("applause");
                  $("#notice").text(game.mark(c) + " wins!");
                }

              // game in progress
              } else {
                game.play_audio(mark);
                game.advance_turn();
              }
            }

            return false;
          }); // cells.click

          $.each(["X", "O", "Sad-Trombone", "applause"], function(i, basename) {
            game.load_audio(basename);
          });
        }); // new TTT.Game
      };
    </script>
  </head>
  <body>
    <section id="header">
      <h1>TIC TAC TWO: <em>THE EXTREME</em></h1>
      <h3>by <a href="http://greatseth.com">Seth</a></h3>
    </section>

    <!--
    <section class="player" id="player_x">
      <label for="player_x_name">X</label>
      <input type="text" id="player_x_name" />
    </section>
    -->

    <ul id="board">
      <li></li> <li></li> <li class="nr"></li>
      <li></li> <li></li> <li class="nr"></li>
      <li class="nb"></li> <li class="nb"></li> <li class="nr nb"></li>
    </ul>

    <!--
    <section class="player" id="player_o">
      <label for="player_o_name">O</label>
      <input type="text" id="player_o_name" />
    </section>
    -->

    <p id="notice"></p>
  </body>
</html>
